<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>æ¡œç”º è¥¿é‰„ãƒã‚¹ æ™‚åˆ»æ¡ˆå†…</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #fdf6ee;
    --panel: #ffffff;
    --border: #f0d9bc;
    --accent: #e8820a;
    --green: #2e9e5b;
    --text: #2c1a00;
    --muted: #a07850;
    --card: #ffffff;
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { background: var(--bg); color: var(--text); font-family: 'Noto Sans JP', sans-serif; min-height: 100vh; }
  body::before {
    content: ''; position: fixed; inset: 0;
    background-image: linear-gradient(rgba(232,130,10,0.05) 1px, transparent 1px), linear-gradient(90deg, rgba(232,130,10,0.05) 1px, transparent 1px);
    background-size: 40px 40px; pointer-events: none; z-index: 0;
  }
  .container { position: relative; z-index: 1; max-width: 700px; margin: 0 auto; padding: 12px 12px 60px; }

  /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
  header {
    background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
    border: 1px solid var(--border); border-radius: 16px; padding: 12px 16px; margin-bottom: 12px;
    position: relative; overflow: hidden;
  }
  header::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--accent), #f5a623, var(--accent)); }
  .header-top { display: flex; align-items: center; justify-content: space-between; }
  .logo { display: flex; align-items: center; gap: 8px; }
  .logo-icon { width: 36px; height: 36px; background: var(--accent); border-radius: 9px; display: flex; align-items: center; justify-content: center; font-size: 16px; }
  .logo h1 { font-size: 14px; font-weight: 900; letter-spacing: 1px; }
  .logo p { font-size: 9px; color: var(--muted); }
  .live { display: flex; align-items: center; gap: 4px; background: rgba(46,158,91,0.12); border: 1px solid rgba(46,158,91,0.3); border-radius: 20px; padding: 3px 8px; font-size: 9px; color: var(--green); font-weight: 700; }
  .dot { width: 5px; height: 5px; border-radius: 50%; background: var(--green); animation: pulse 1.4s ease-in-out infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }
  .clock-wrap { text-align: center; margin-top: 8px; }
  .clock { font-family: 'Share Tech Mono', monospace; font-size: 34px; color: #2c1a00; letter-spacing: 4px; }
  .datestr { font-size: 10px; color: var(--muted); letter-spacing: 2px; margin-top: 2px; }
  .sync-badge { display: none; align-items: center; gap: 4px; background: rgba(46,158,91,0.1); border: 1px solid rgba(46,158,91,0.25); border-radius: 20px; padding: 2px 8px; font-size: 9px; color: var(--green); font-weight: 700; margin-top: 4px; justify-content: center; }

  /* è·¯ç·šå›³ */
  .route-map { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 12px 14px; margin-bottom: 10px; }
  .route-title { font-size: 9px; color: var(--muted); letter-spacing: 2px; margin-bottom: 12px; }
  .stops-scroll { overflow-x: auto; scrollbar-width: none; }
  .stops-scroll::-webkit-scrollbar { display: none; }
  .stops-line { display: flex; align-items: flex-start; padding-bottom: 4px; min-width: max-content; }
  .stop-wrap { display: flex; flex-direction: column; align-items: center; }
  .node-row { display: flex; align-items: center; }
  .stop-node { width: 14px; height: 14px; border-radius: 50%; border: 3px solid var(--accent); background: var(--bg); flex-shrink: 0; }
  .stop-node.focus { width: 22px; height: 22px; background: var(--accent); border-color: var(--accent); box-shadow: 0 0 12px rgba(232,130,10,0.5); }
  .line-seg { height: 4px; width: 28px; background: var(--accent); flex-shrink: 0; }
  .stop-label { margin-top: 6px; font-size: 9px; font-weight: 700; text-align: center; color: var(--muted); white-space: nowrap; max-width: 48px; line-height: 1.3; }
  .stop-label.focus { color: var(--accent); font-size: 10px; }

  /* æ–¹å‘ãƒ»æ›œæ—¥ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
  .day-auto-label { font-size: 10px; color: var(--muted); margin-bottom: 5px; text-align: right; letter-spacing: 1px; }
  .filter-row { display: flex; gap: 6px; margin-bottom: 10px; }
  .ftab { flex: 1; padding: 10px 6px; background: var(--panel); border: 1px solid var(--border); border-radius: 10px; color: var(--muted); font-size: 13px; font-weight: 700; cursor: pointer; transition: all 0.2s; text-align: center; }
  .ftab.active { background: var(--accent); border-color: var(--accent); color: #fff; box-shadow: 0 3px 12px rgba(232,130,10,0.3); }
  .ftab.day-tab { flex: none; padding: 10px 14px; }
  .ftab.day-tab.active { background: #c06000; border-color: #c06000; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     ã§ã‹ã§ã‹ ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚«ãƒ¼ãƒ‰
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .hero-card {
    background: linear-gradient(145deg, var(--accent) 0%, #f5a623 100%);
    border-radius: 20px;
    padding: 20px 20px 18px;
    margin-bottom: 12px;
    box-shadow: 0 8px 32px rgba(232,130,10,0.35);
    cursor: pointer;
    position: relative;
    overflow: hidden;
  }
  .hero-card::before {
    content: 'ğŸšŒ';
    position: absolute; right: -8px; bottom: -10px;
    font-size: 90px; opacity: 0.12; line-height: 1;
  }
  .hero-label { font-size: 11px; color: rgba(255,255,255,0.75); font-weight: 700; letter-spacing: 2px; margin-bottom: 6px; }
  .hero-main { display: flex; align-items: flex-end; justify-content: space-between; }
  .hero-left {}
  .hero-route { display: inline-block; background: rgba(255,255,255,0.25); color: #fff; font-weight: 900; border-radius: 8px; padding: 4px 12px; font-size: 20px; margin-bottom: 6px; }
  .hero-dest { font-size: 26px; font-weight: 900; color: #fff; line-height: 1.1; }
  .hero-time { font-family: 'Share Tech Mono', monospace; font-size: 64px; color: #fff; line-height: 1; font-weight: 400; letter-spacing: 2px; }
  .hero-countdown { text-align: center; background: rgba(255,255,255,0.2); border-radius: 14px; padding: 10px 14px; min-width: 76px; }
  .hero-cnum { font-family: 'Share Tech Mono', monospace; font-size: 36px; color: #fff; line-height: 1; }
  .hero-clabel { font-size: 11px; color: rgba(255,255,255,0.8); margin-top: 2px; }
  .hero-tap { font-size: 10px; color: rgba(255,255,255,0.65); margin-top: 8px; text-align: right; }

  /* æ¬¡ã®ãƒã‚¹ãƒªã‚¹ãƒˆï¼ˆ2ç•ªç›®ä»¥é™ï¼‰ */
  .upcoming-list { background: var(--card); border: 1px solid var(--border); border-radius: 14px; margin-bottom: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(232,130,10,0.06); }
  .upcoming-title { font-size: 10px; color: var(--muted); letter-spacing: 2px; padding: 10px 14px 6px; }
  .upcoming-item { display: flex; align-items: center; gap: 10px; padding: 10px 14px; border-top: 1px solid var(--border); cursor: pointer; transition: background 0.15s; }
  .upcoming-item:hover { background: rgba(232,130,10,0.04); }
  .upcoming-badge { background: var(--accent); color: #fff; font-weight: 900; border-radius: 6px; padding: 3px 8px; font-size: 13px; min-width: 40px; text-align: center; }
  .upcoming-dest { flex: 1; font-size: 14px; font-weight: 700; }
  .upcoming-time { font-family: 'Share Tech Mono', monospace; font-size: 18px; font-weight: 700; color: var(--text); }
  .upcoming-min { font-size: 11px; color: var(--muted); min-width: 44px; text-align: right; }

  /* æ™‚åˆ»è¡¨ */
  .timetable-card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; overflow: hidden; box-shadow: 0 2px 8px rgba(232,130,10,0.06); }
  .tt-header { padding: 10px 14px 8px; border-bottom: 1px solid var(--border); font-size: 10px; color: var(--muted); letter-spacing: 2px; }
  .timetable { padding: 12px 14px 14px; }
  .time-grid { display: flex; flex-wrap: wrap; gap: 6px; }
  .time-item { display: flex; align-items: center; gap: 5px; background: var(--panel); border: 1.5px solid var(--border); border-radius: 8px; padding: 8px 12px; font-family: 'Share Tech Mono', monospace; font-size: 15px; cursor: pointer; transition: all 0.15s; }
  .time-item:active { background: rgba(232,130,10,0.08); }
  .time-item.past { opacity: 0.2; }
  .time-item.next-item { border-color: var(--accent); background: rgba(232,130,10,0.07); color: var(--accent); font-weight: 700; }
  .rn { font-size: 10px; color: var(--accent); font-family: 'Noto Sans JP', sans-serif; font-weight: 700; }

  /* ã‚µãƒ–ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
  .sub-filter { margin-bottom: 10px; }
  .sub-filter-title { font-size: 9px; color: var(--muted); letter-spacing: 1px; margin-bottom: 5px; }
  .chip-row { display: flex; flex-wrap: wrap; gap: 5px; }
  .chip { padding: 6px 12px; background: var(--panel); border: 1px solid var(--border); border-radius: 20px; font-size: 12px; font-weight: 700; color: var(--muted); cursor: pointer; transition: all 0.15s; user-select: none; }
  .chip.active { background: var(--accent); border-color: var(--accent); color: #fff; }
  .chip.all-chip.active { background: #666; border-color: #666; }

  /* ãƒ¢ãƒ¼ãƒ€ãƒ« */
  .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 100; align-items: flex-end; justify-content: center; }
  .modal-overlay.open { display: flex; }
  .modal { background: #fff; border-radius: 20px 20px 0 0; padding: 20px 20px 40px; width: 100%; max-width: 700px; animation: slideUp 0.25s ease; max-height: 80vh; overflow-y: auto; }
  @keyframes slideUp { from{transform:translateY(100%)} to{transform:translateY(0)} }
  .modal-handle { width: 36px; height: 4px; background: #ddd; border-radius: 2px; margin: 0 auto 16px; }
  .modal-route { display: flex; align-items: center; gap: 10px; margin-bottom: 16px; }
  .modal-badge { background: var(--accent); color: #fff; font-weight: 900; border-radius: 8px; padding: 5px 14px; font-size: 20px; }
  .modal-dest { font-size: 20px; font-weight: 900; }
  .modal-time { font-family: 'Share Tech Mono', monospace; font-size: 15px; color: var(--muted); }
  .modal-via-title { font-size: 10px; color: var(--muted); letter-spacing: 2px; margin-bottom: 10px; }
  .via-stops { display: flex; flex-direction: column; }
  .via-stop { display: flex; align-items: center; gap: 10px; position: relative; }
  .via-stop:not(:last-child)::after { content: ''; position: absolute; left: 9px; top: 22px; width: 2px; height: 20px; background: var(--border); }
  .via-dot { width: 20px; height: 20px; border-radius: 50%; border: 2px solid var(--accent); background: #fff; flex-shrink: 0; display: flex; align-items: center; justify-content: center; z-index: 1; }
  .via-dot.current { background: var(--accent); }
  .via-dot.terminus { background: var(--text); border-color: var(--text); }
  .via-dot span { width: 8px; height: 8px; border-radius: 50%; background: var(--accent); }
  .via-dot.current span, .via-dot.terminus span { background: #fff; }
  .via-name { font-size: 14px; font-weight: 700; padding: 10px 0; }
  .via-name.current { color: var(--accent); }
  .via-name.terminus { font-weight: 900; }
  .modal-close { width: 100%; margin-top: 16px; padding: 13px; background: var(--bg); border: 1px solid var(--border); border-radius: 10px; font-size: 14px; font-weight: 700; color: var(--muted); cursor: pointer; }

  .ended-hero { background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 32px 20px; text-align: center; margin-bottom: 12px; }
  .ended-hero p { font-size: 16px; color: var(--muted); font-weight: 700; }

  footer { text-align: center; margin-top: 16px; font-size: 9px; color: var(--muted); letter-spacing: 1px; line-height: 1.8; }
  footer span { color: var(--accent); }
</style>
</head>
<body>
<div class="container">
  <header>
    <div class="header-top">
      <div class="logo">
        <div class="logo-icon">ğŸšŒ</div>
        <div><h1>æ¡œç”º è¥¿é‰„ãƒã‚¹ æ™‚åˆ»æ¡ˆå†…</h1><p>SAKURAMACHI BUS SCHEDULE</p></div>
      </div>
      <div class="live"><span class="dot"></span>LIVE</div>
    </div>
    <div class="clock-wrap">
      <div class="clock" id="clock">--:--:--</div>
      <div class="datestr" id="dateStr">----å¹´--æœˆ--æ—¥ï¼ˆ--ï¼‰</div>
      <div class="sync-badge" id="sync-badge">âœ“ ãƒãƒƒãƒˆæ™‚åˆ»åŒæœŸæ¸ˆã¿</div>
    </div>
  </header>

  <div class="route-map">
    <div class="route-title">â–¸ è·¯ç·šå›³</div>
    <div class="stops-scroll"><div class="stops-line" id="routemap"></div></div>
  </div>

  <div class="day-auto-label" id="day-auto-label">ğŸ“… ä»Šæ—¥ã®æ›œæ—¥ã«è‡ªå‹•è¨­å®šä¸­</div>
  <div class="filter-row">
    <div class="ftab active" onclick="setDir('up',this)">â¬† å¤©ç¥ãƒ»åšå¤šæ–¹é¢</div>
    <div class="ftab" onclick="setDir('down',this)">â¬‡ æŸåŸãƒ»æ¡§åŸæ–¹é¢</div>
    <div class="ftab day-tab active" id="dayBtn" onclick="toggleDay(this)">å¹³æ—¥</div>
  </div>

  <div class="sub-filter">
    <div class="sub-filter-title">â–¸ è¡Œãå…ˆç•ªå·</div>
    <div class="chip-row" id="route-chips"></div>
  </div>
  <div class="sub-filter">
    <div class="sub-filter-title">â–¸ è¡Œãå…ˆ</div>
    <div class="chip-row" id="dest-chips"></div>
  </div>

  <div id="board"></div>

  <div class="modal-overlay" id="modal" onclick="closeModal(event)">
    <div class="modal">
      <div class="modal-handle"></div>
      <div class="modal-route">
        <div class="modal-badge" id="m-badge"></div>
        <div>
          <div class="modal-dest" id="m-dest"></div>
          <div class="modal-time" id="m-time"></div>
        </div>
      </div>
      <div class="modal-via-title">â–¸ çµŒç”±ãƒ»åœè»Šé †</div>
      <div class="via-stops" id="m-via"></div>
      <button class="modal-close" onclick="document.getElementById('modal').classList.remove('open')">é–‰ã˜ã‚‹</button>
    </div>
  </div>

  <footer>â€» å®Ÿéš›ã®ãƒ€ã‚¤ãƒ¤ã¯è¥¿é‰„ãƒã‚¹å…¬å¼ã‚µã‚¤ãƒˆã§ã”ç¢ºèªãã ã•ã„<br><span>è¥¿é‰„ãƒã‚¹</span> æ¡œç”ºï¼ˆç¦å²¡å¸‚å—åŒºï¼‰</footer>
</div>
<script>
const DAYS = ['æ—¥','æœˆ','ç«','æ°´','æœ¨','é‡‘','åœŸ'];
const ROUTE_STOPS = ['åšå¤šé§…','å¤©ç¥','è–¬é™¢','å…­æœ¬æ¾','æ¦ç”º','æ¡œç”º','èŠ±ç•‘','æŸåŸ'];

const DATA = {
  up: {
    weekday: [
      {h:5,m:57,r:'58',d:'åšå¤šé§…'},{h:5,m:59,r:'58',d:'åšå¤šé§…'},
      {h:5,m:57,r:'56',d:'å¤©ç¥'},
      {h:6,m:11,r:'59',d:'ç®±å´3ä¸ç›®'},{h:6,m:14,r:'58',d:'åšå¤šé§…'},{h:6,m:22,r:'56',d:'å¤©ç¥'},{h:6,m:24,r:'58',d:'åšå¤šé§…'},{h:6,m:35,r:'58',d:'åšå¤šé§…'},{h:6,m:40,r:'58',d:'åšå¤šé§…'},{h:6,m:40,r:'59',d:'ç®±å´3ä¸ç›®'},{h:6,m:41,r:'57',d:'åšå¤šé§…'},{h:6,m:50,r:'58',d:'åšå¤šé§…'},{h:6,m:57,r:'58',d:'åšå¤šé§…'},{h:6,m:58,r:'59',d:'å‰å¡š'},{h:6,m:59,r:'57',d:'åšå¤šé§…'},
      {h:7,m:6,r:'58',d:'åšå¤šé§…'},{h:7,m:9,r:'56',d:'å¤©ç¥'},{h:7,m:9,r:'58',d:'åšå¤šé§…'},{h:7,m:16,r:'58',d:'åšå¤šé§…'},{h:7,m:20,r:'58',d:'åšå¤šé§…'},{h:7,m:23,r:'58',d:'åšå¤šé§…'},{h:7,m:27,r:'58',d:'åšå¤šé§…'},{h:7,m:28,r:'57',d:'åšå¤šé§…'},{h:7,m:31,r:'58',d:'åšå¤šé§…'},{h:7,m:32,r:'56',d:'åšå¤šé§…'},{h:7,m:35,r:'57-1',d:'åšå¤šé§…'},{h:7,m:35,r:'58',d:'åšå¤šé§…'},{h:7,m:41,r:'58',d:'åšå¤šé§…'},{h:7,m:42,r:'59',d:'å‰å¡š'},{h:7,m:45,r:'57-1',d:'åšå¤šé§…'},{h:7,m:48,r:'57',d:'åšå¤šé§…'},{h:7,m:49,r:'58',d:'åšå¤šé§…'},{h:7,m:56,r:'58',d:'åšå¤šé§…'},{h:7,m:58,r:'56',d:'åšå¤šé§…'},
      {h:8,m:2,r:'57-1',d:'åšå¤šé§…'},{h:8,m:4,r:'56',d:'åšå¤šé§…'},{h:8,m:8,r:'56',d:'åšå¤šé§…'},{h:8,m:11,r:'58',d:'åšå¤šé§…'},{h:8,m:12,r:'59',d:'å¤©ç¥'},{h:8,m:13,r:'56',d:'å¤©ç¥'},{h:8,m:16,r:'57-1',d:'åšå¤šé§…'},{h:8,m:24,r:'56',d:'åšå¤šé§…'},{h:8,m:28,r:'58',d:'åšå¤šé§…'},{h:8,m:31,r:'57-1',d:'åšå¤šé§…å‰'},{h:8,m:47,r:'56',d:'å¤©ç¥'},{h:8,m:49,r:'58',d:'åšå¤šé§…'},
      {h:9,m:4,r:'58',d:'åšå¤šé§…'},{h:9,m:6,r:'56',d:'å¤©ç¥'},{h:9,m:11,r:'56',d:'åšå¤šé§…'},{h:9,m:19,r:'58',d:'åšå¤šé§…'},{h:9,m:26,r:'57',d:'åšå¤šé§…'},{h:9,m:34,r:'58',d:'åšå¤šé§…'},{h:9,m:36,r:'56',d:'å¤©ç¥'},{h:9,m:46,r:'56',d:'åšå¤šé§…'},{h:9,m:49,r:'58',d:'åšå¤šé§…'},
      {h:10,m:6,r:'57',d:'åšå¤šé§…'},{h:10,m:9,r:'58',d:'åšå¤šé§…'},{h:10,m:16,r:'56',d:'åšå¤šé§…'},{h:10,m:24,r:'58',d:'åšå¤šé§…'},{h:10,m:26,r:'56',d:'å¤©ç¥'},{h:10,m:39,r:'58',d:'åšå¤šé§…'},{h:10,m:46,r:'56',d:'å¤©ç¥'},{h:10,m:54,r:'58',d:'åšå¤šé§…'},
      {h:11,m:3,r:'57',d:'åšå¤šé§…'},{h:11,m:9,r:'58',d:'åšå¤šé§…'},{h:11,m:13,r:'56',d:'åšå¤šé§…'},{h:11,m:24,r:'58',d:'åšå¤šé§…'},{h:11,m:38,r:'57',d:'åšå¤šé§…'},{h:11,m:39,r:'58',d:'åšå¤šé§…'},{h:11,m:54,r:'58',d:'åšå¤šé§…'},
      {h:12,m:3,r:'57',d:'åšå¤šé§…'},{h:12,m:9,r:'58',d:'åšå¤šé§…'},{h:12,m:15,r:'56',d:'åšå¤šé§…'},{h:12,m:23,r:'58',d:'åšå¤šé§…'},{h:12,m:39,r:'56',d:'å¤©ç¥'},{h:12,m:40,r:'58',d:'åšå¤šé§…'},{h:12,m:54,r:'58',d:'åšå¤šé§…'},
      {h:13,m:3,r:'57',d:'åšå¤šé§…'},{h:13,m:6,r:'58',d:'åšå¤šé§…'},{h:13,m:13,r:'56',d:'åšå¤šé§…'},{h:13,m:18,r:'58',d:'åšå¤šé§…'},{h:13,m:23,r:'57',d:'åšå¤šé§…'},{h:13,m:30,r:'58',d:'åšå¤šé§…'},{h:13,m:42,r:'58',d:'åšå¤šé§…'},{h:13,m:43,r:'56',d:'å¤©ç¥'},{h:13,m:54,r:'58',d:'åšå¤šé§…'},
      {h:14,m:3,r:'56',d:'å¤©ç¥'},{h:14,m:9,r:'58',d:'åšå¤šé§…'},{h:14,m:13,r:'59',d:'å¤©ç¥'},{h:14,m:23,r:'57',d:'åšå¤šé§…'},{h:14,m:24,r:'58',d:'åšå¤šé§…'},{h:14,m:39,r:'58',d:'åšå¤šé§…'},{h:14,m:43,r:'57',d:'åšå¤šé§…'},{h:14,m:43,r:'59',d:'å¤©ç¥'},{h:14,m:53,r:'56',d:'åšå¤šé§…'},{h:14,m:54,r:'58',d:'åšå¤šé§…'},
      {h:15,m:3,r:'57',d:'åšå¤šé§…'},{h:15,m:9,r:'58',d:'åšå¤šé§…'},{h:15,m:19,r:'58',d:'åšå¤šé§…'},{h:15,m:23,r:'56',d:'å¤©ç¥'},{h:15,m:30,r:'56',d:'åšå¤šé§…'},{h:15,m:34,r:'58',d:'åšå¤šé§…'},{h:15,m:44,r:'58',d:'åšå¤šé§…'},{h:15,m:53,r:'56',d:'åšå¤šé§…'},{h:15,m:54,r:'58',d:'åšå¤šé§…'},{h:15,m:58,r:'56',d:'å¤©ç¥'},
      {h:16,m:5,r:'58',d:'åšå¤šé§…'},{h:16,m:8,r:'56',d:'åšå¤šé§…'},{h:16,m:13,r:'59',d:'å‰å¡š'},{h:16,m:15,r:'58',d:'åšå¤šé§…'},{h:16,m:18,r:'57',d:'åšå¤šé§…'},{h:16,m:23,r:'56',d:'åšå¤šé§…'},{h:16,m:25,r:'58',d:'åšå¤šé§…'},{h:16,m:28,r:'57',d:'åšå¤šé§…'},{h:16,m:36,r:'58',d:'åšå¤šé§…'},{h:16,m:47,r:'58',d:'åšå¤šé§…'},{h:16,m:49,r:'57',d:'åšå¤šé§…'},{h:16,m:53,r:'56',d:'åšå¤šé§…'},{h:16,m:59,r:'58',d:'åšå¤šé§…'},
      {h:17,m:3,r:'57',d:'åšå¤šé§…'},{h:17,m:15,r:'58',d:'åšå¤šé§…'},{h:17,m:18,r:'57',d:'åšå¤šé§…'},{h:17,m:25,r:'58',d:'åšå¤šé§…'},{h:17,m:35,r:'58',d:'åšå¤šé§…'},{h:17,m:38,r:'57',d:'åšå¤šé§…'},{h:17,m:44,r:'58',d:'åšå¤šé§…'},{h:17,m:54,r:'58',d:'åšå¤šé§…'},
      {h:18,m:5,r:'58',d:'åšå¤šé§…'},{h:18,m:14,r:'58',d:'åšå¤šé§…'},{h:18,m:16,r:'57',d:'åšå¤šé§…'},{h:18,m:24,r:'58',d:'åšå¤šé§…'},{h:18,m:26,r:'56',d:'åšå¤šé§…'},{h:18,m:38,r:'57',d:'åšå¤šé§…'},{h:18,m:40,r:'58',d:'åšå¤šé§…'},{h:18,m:55,r:'58',d:'åšå¤šé§…'},{h:18,m:58,r:'56',d:'åšå¤šé§…'},
      {h:19,m:9,r:'57',d:'åšå¤šé§…'},{h:19,m:16,r:'58',d:'åšå¤šé§…'},{h:19,m:19,r:'56',d:'åšå¤šé§…'},{h:19,m:36,r:'58',d:'åšå¤šé§…'},{h:19,m:39,r:'57',d:'åšå¤šé§…'},{h:19,m:48,r:'56',d:'åšå¤šé§…'},{h:19,m:55,r:'58',d:'åšå¤šé§…'},{h:19,m:59,r:'57',d:'åšå¤šé§…'},
      {h:20,m:23,r:'56',d:'å¤©ç¥'},{h:20,m:26,r:'58',d:'åšå¤šé§…'},{h:20,m:52,r:'57',d:'åšå¤šé§…'},{h:20,m:56,r:'58',d:'åšå¤šé§…'},
      {h:21,m:26,r:'58',d:'åšå¤šé§…'},{h:21,m:42,r:'56',d:'åšå¤šé§…'},
      {h:22,m:6,r:'58',d:'åšå¤šé§…'},{h:22,m:12,r:'56',d:'å¤©ç¥'},
    ],
    saturday: [
      {h:5,m:47,r:'56',d:'å¤©ç¥'},
      {h:6,m:2,r:'57',d:'å¤©ç¥'},{h:6,m:10,r:'69',d:'åšå¤šé§…'},{h:6,m:17,r:'56',d:'åšå¤šé§…'},{h:6,m:19,r:'58',d:'åšå¤šé§…'},{h:6,m:27,r:'58',d:'åšå¤šé§…'},{h:6,m:32,r:'57',d:'å¤©ç¥'},{h:6,m:39,r:'58',d:'åšå¤šé§…'},{h:6,m:46,r:'58',d:'åšå¤šé§…'},{h:6,m:47,r:'56',d:'åšå¤šé§…'},{h:6,m:50,r:'69',d:'åšå¤šé§…'},{h:6,m:51,r:'58',d:'åšå¤šé§…'},{h:6,m:57,r:'58',d:'åšå¤šé§…'},
      {h:7,m:2,r:'57',d:'åšå¤šé§…'},{h:7,m:3,r:'58',d:'åšå¤šé§…'},{h:7,m:7,r:'59',d:'å¤©ç¥'},{h:7,m:12,r:'58',d:'åšå¤šé§…'},{h:7,m:14,r:'56',d:'å¤©ç¥'},{h:7,m:15,r:'69',d:'åšå¤šé§…'},{h:7,m:20,r:'58',d:'åšå¤šé§…'},{h:7,m:24,r:'57',d:'åšå¤šé§…'},{h:7,m:26,r:'58',d:'åšå¤šé§…'},{h:7,m:30,r:'56',d:'åšå¤šé§…'},{h:7,m:34,r:'58',d:'åšå¤šé§…'},{h:7,m:37,r:'57',d:'å¤©ç¥'},{h:7,m:44,r:'56',d:'åšå¤šé§…'},{h:7,m:48,r:'58',d:'åšå¤šé§…'},{h:7,m:51,r:'56',d:'å¤©ç¥'},{h:7,m:53,r:'69',d:'åšå¤šé§…'},{h:7,m:59,r:'58',d:'åšå¤šé§…'},
      {h:8,m:1,r:'57',d:'åšå¤šé§…'},{h:8,m:8,r:'69',d:'åšå¤šé§…'},{h:8,m:10,r:'59',d:'å¤©ç¥'},{h:8,m:11,r:'58',d:'åšå¤šé§…'},{h:8,m:12,r:'56',d:'å¤©ç¥'},{h:8,m:21,r:'57',d:'åšå¤šé§…'},{h:8,m:26,r:'58',d:'åšå¤šé§…'},{h:8,m:31,r:'56',d:'åšå¤šé§…'},{h:8,m:40,r:'59',d:'å¤©ç¥'},{h:8,m:40,r:'58',d:'åšå¤šé§…'},{h:8,m:41,r:'56',d:'å¤©ç¥'},{h:8,m:49,r:'58',d:'åšå¤šé§…'},{h:8,m:50,r:'69',d:'åšå¤šé§…'},{h:8,m:51,r:'57',d:'åšå¤šé§…'},{h:8,m:59,r:'58',d:'åšå¤šé§…'},
      {h:9,m:1,r:'56',d:'åšå¤šé§…'},{h:9,m:7,r:'58',d:'åšå¤šé§…'},{h:9,m:16,r:'57',d:'å¤©ç¥'},{h:9,m:18,r:'69',d:'åšå¤šé§…'},{h:9,m:18,r:'58',d:'åšå¤šé§…'},{h:9,m:26,r:'56',d:'åšå¤šé§…'},{h:9,m:28,r:'58',d:'åšå¤šé§…'},{h:9,m:36,r:'56',d:'å¤©ç¥'},{h:9,m:41,r:'58',d:'åšå¤šé§…'},{h:9,m:48,r:'69',d:'åšå¤šé§…'},{h:9,m:55,r:'58',d:'åšå¤šé§…'},
      {h:10,m:5,r:'69',d:'åšå¤šé§…'},{h:10,m:6,r:'56',d:'å¤©ç¥'},{h:10,m:10,r:'58',d:'åšå¤šé§…'},{h:10,m:21,r:'56',d:'åšå¤šé§…'},{h:10,m:26,r:'58',d:'åšå¤šé§…'},{h:10,m:41,r:'58',d:'åšå¤šé§…'},{h:10,m:43,r:'69',d:'åšå¤šé§…'},{h:10,m:49,r:'56',d:'åšå¤šé§…'},{h:10,m:55,r:'58',d:'åšå¤šé§…'},
      {h:11,m:1,r:'57',d:'å¤©ç¥'},{h:11,m:3,r:'69',d:'åšå¤šé§…'},{h:11,m:10,r:'59',d:'å¤©ç¥'},{h:11,m:11,r:'56',d:'å¤©ç¥'},{h:11,m:14,r:'58',d:'åšå¤šé§…'},{h:11,m:24,r:'69',d:'åšå¤šé§…'},{h:11,m:31,r:'56',d:'åšå¤šé§…'},{h:11,m:33,r:'58',d:'åšå¤šé§…'},{h:11,m:41,r:'56',d:'å¤©ç¥'},{h:11,m:51,r:'56',d:'åšå¤šé§…'},{h:11,m:54,r:'58',d:'åšå¤šé§…'},
      {h:12,m:11,r:'56',d:'åšå¤šé§…'},{h:12,m:12,r:'69',d:'åšå¤šé§…'},{h:12,m:14,r:'58',d:'åšå¤šé§…'},{h:12,m:21,r:'56',d:'å¤©ç¥'},{h:12,m:34,r:'58',d:'åšå¤šé§…'},{h:12,m:41,r:'56',d:'åšå¤šé§…'},{h:12,m:56,r:'56',d:'å¤©ç¥'},{h:12,m:56,r:'58',d:'åšå¤šé§…'},{h:12,m:57,r:'69',d:'åšå¤šé§…'},
      {h:13,m:10,r:'58',d:'åšå¤šé§…'},{h:13,m:21,r:'56',d:'å¤©ç¥'},{h:13,m:26,r:'58',d:'åšå¤šé§…'},{h:13,m:31,r:'57',d:'å¤©ç¥'},{h:13,m:39,r:'58',d:'åšå¤šé§…'},{h:13,m:41,r:'56',d:'åšå¤šé§…'},{h:13,m:47,r:'69',d:'åšå¤šé§…'},{h:13,m:51,r:'56',d:'å¤©ç¥'},{h:13,m:53,r:'58',d:'åšå¤šé§…'},
      {h:14,m:0,r:'59',d:'å¤©ç¥'},{h:14,m:7,r:'69',d:'åšå¤šé§…'},{h:14,m:10,r:'58',d:'åšå¤šé§…'},{h:14,m:16,r:'56',d:'åšå¤šé§…'},{h:14,m:24,r:'58',d:'åšå¤šé§…'},{h:14,m:41,r:'56',d:'å¤©ç¥'},{h:14,m:41,r:'58',d:'åšå¤šé§…'},{h:14,m:47,r:'69',d:'åšå¤šé§…'},{h:14,m:51,r:'56',d:'åšå¤šé§…'},{h:14,m:55,r:'58',d:'åšå¤šé§…'},
      {h:15,m:0,r:'59',d:'å¤©ç¥'},{h:15,m:8,r:'58',d:'åšå¤šé§…'},{h:15,m:11,r:'56',d:'å¤©ç¥'},{h:15,m:20,r:'58',d:'åšå¤šé§…'},{h:15,m:21,r:'56',d:'å¤©ç¥'},{h:15,m:32,r:'69',d:'åšå¤šé§…'},{h:15,m:33,r:'58',d:'åšå¤šé§…'},{h:15,m:41,r:'56',d:'åšå¤šé§…'},{h:15,m:44,r:'58',d:'åšå¤šé§…'},{h:15,m:51,r:'56',d:'å¤©ç¥'},{h:15,m:57,r:'58',d:'åšå¤šé§…'},
      {h:16,m:9,r:'58',d:'åšå¤šé§…'},{h:16,m:11,r:'56',d:'åšå¤šé§…'},{h:16,m:21,r:'56',d:'åšå¤šé§…'},{h:16,m:21,r:'58',d:'åšå¤šé§…'},{h:16,m:22,r:'69',d:'åšå¤šé§…'},{h:16,m:33,r:'58',d:'åšå¤šé§…'},{h:16,m:41,r:'56',d:'å¤©ç¥'},{h:16,m:45,r:'58',d:'åšå¤šé§…'},{h:16,m:47,r:'69',d:'åšå¤šé§…'},{h:16,m:52,r:'56',d:'å¤©ç¥'},{h:16,m:57,r:'58',d:'åšå¤šé§…'},
      {h:17,m:7,r:'69',d:'åšå¤šé§…'},{h:17,m:11,r:'56',d:'å¤©ç¥'},{h:17,m:11,r:'58',d:'åšå¤šé§…'},{h:17,m:22,r:'56',d:'åšå¤šé§…'},{h:17,m:25,r:'58',d:'åšå¤šé§…'},{h:17,m:38,r:'69',d:'åšå¤šé§…'},{h:17,m:42,r:'56',d:'åšå¤šé§…'},{h:17,m:46,r:'58',d:'åšå¤šé§…'},{h:17,m:52,r:'56',d:'å¤©ç¥'},{h:17,m:58,r:'69',d:'åšå¤šé§…'},
      {h:18,m:1,r:'58',d:'åšå¤šé§…'},{h:18,m:11,r:'56',d:'åšå¤šé§…'},{h:18,m:17,r:'58',d:'åšå¤šé§…'},{h:18,m:22,r:'56',d:'å¤©ç¥'},{h:18,m:23,r:'69',d:'åšå¤šé§…'},{h:18,m:34,r:'57',d:'å¤©ç¥'},{h:18,m:34,r:'58',d:'åšå¤šé§…'},{h:18,m:46,r:'56',d:'åšå¤šé§…'},{h:18,m:53,r:'58',d:'åšå¤šé§…'},
      {h:19,m:9,r:'69',d:'åšå¤šé§…'},{h:19,m:12,r:'56',d:'åšå¤šé§…'},{h:19,m:13,r:'58',d:'åšå¤šé§…'},{h:19,m:27,r:'56',d:'åšå¤šé§…'},{h:19,m:34,r:'69',d:'åšå¤šé§…'},{h:19,m:34,r:'58',d:'åšå¤šé§…'},{h:19,m:59,r:'58',d:'åšå¤šé§…'},
      {h:20,m:7,r:'56',d:'åšå¤šé§…'},{h:20,m:19,r:'69',d:'åšå¤šé§…'},{h:20,m:34,r:'58',d:'åšå¤šé§…'},{h:20,m:49,r:'69',d:'åšå¤šé§…'},{h:20,m:52,r:'56',d:'åšå¤šé§…'},
      {h:21,m:4,r:'58',d:'åšå¤šé§…'},{h:21,m:19,r:'69',d:'åšå¤šé§…'},{h:21,m:22,r:'57',d:'åšå¤šé§…'},{h:21,m:41,r:'58',d:'åšå¤šé§…'},{h:21,m:49,r:'69',d:'åšå¤šé§…'},{h:21,m:57,r:'56',d:'å¤©ç¥'},
      {h:22,m:6,r:'58',d:'åšå¤šé§…'},{h:22,m:36,r:'58',d:'åšå¤šé§…'},
    ]
  },
  down: {
    weekday: [
      {h:7,m:47,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:8,m:4,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:8,m:21,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:8,m:29,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:8,m:41,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:8,m:46,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:8,m:56,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:9,m:1,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:9,m:11,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:9,m:16,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:9,m:21,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:9,m:26,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:9,m:36,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:9,m:41,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:9,m:51,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:10,m:1,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:10,m:11,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:10,m:16,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:10,m:21,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:10,m:31,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:10,m:51,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:11,m:1,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:11,m:11,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:11,m:41,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:11,m:46,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:12,m:1,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:12,m:21,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:12,m:40,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:12,m:58,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:13,m:18,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:13,m:43,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:14,m:13,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:14,m:23,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:14,m:48,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:15,m:13,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:15,m:23,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:15,m:43,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:16,m:3,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:16,m:23,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:16,m:43,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:16,m:53,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:17,m:13,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:17,m:23,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:17,m:44,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:17,m:52,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:18,m:12,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:18,m:17,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:18,m:27,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:18,m:37,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:18,m:47,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:19,m:2,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:19,m:7,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:19,m:17,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:19,m:22,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:19,m:40,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:19,m:50,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:20,m:9,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:20,m:29,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:20,m:49,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:20,m:59,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:21,m:18,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:21,m:25,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:21,m:41,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:22,m:1,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:22,m:26,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:23,m:1,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:23,m:46,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
    ],
    saturday: [
      {h:7,m:22,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:8,m:8,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:8,m:23,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:8,m:53,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:9,m:8,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:9,m:26,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:9,m:33,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:9,m:50,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:10,m:0,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:10,m:32,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:10,m:41,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:11,m:2,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:11,m:26,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:11,m:41,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:12,m:11,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:12,m:25,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:12,m:53,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:13,m:13,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:13,m:23,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:13,m:46,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:14,m:13,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:14,m:23,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:14,m:48,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:14,m:58,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:15,m:23,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:15,m:43,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:15,m:53,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:16,m:13,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:16,m:23,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:16,m:47,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:16,m:57,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:17,m:17,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:17,m:27,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:17,m:47,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:17,m:57,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:18,m:17,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:18,m:27,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:18,m:48,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:18,m:58,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:19,m:18,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:19,m:28,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:19,m:38,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:19,m:58,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:20,m:15,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},{h:20,m:25,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:20,m:48,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:21,m:13,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:21,m:40,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
      {h:22,m:20,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},
      {h:23,m:17,r:'56',d:'æŸåŸå–¶æ¥­æ‰€'},{h:23,m:47,r:'56',d:'æ¡§åŸå–¶æ¥­æ‰€'},
    ]
  }
};

let currentDir = 'up';
let isWeekday = true;
let filterRoutes = new Set(['ALL']);
let filterDests = new Set(['ALL']);

// çµŒç”±åœ°ãƒ‡ãƒ¼ã‚¿
const VIA = {
  '56_up_å¤©ç¥':      ['æ¡œç”º','å‹•ç‰©åœ’','èµ¤å‚é–€','å¤©ç¥'],
  '56_up_åšå¤šé§…':    ['æ¡œç”º','å‹•ç‰©åœ’','èµ¤å‚é–€','å¤©ç¥','åšå¤šé§…'],
  '56_up_åšå¤šé§…å‰':  ['æ¡œç”º','å‹•ç‰©åœ’','èµ¤å‚é–€','å¤©ç¥','åšå¤šé§…å‰'],
  '57_up_å¤©ç¥':      ['æ¡œç”º','å°ç¬¹','æ¡œå‚','èµ¤å‚é–€','å¤©ç¥'],
  '57_up_åšå¤šé§…':    ['æ¡œç”º','å°ç¬¹','æ¡œå‚','èµ¤å‚é–€','å¤©ç¥','åšå¤šé§…'],
  '57-1_up_åšå¤šé§…':  ['æ¡œç”º','å°ç¬¹','æ¡œå‚','èµ¤å‚é–€','å¤©ç¥','åšå¤šé§…'],
  '57-1_up_åšå¤šé§…å‰':['æ¡œç”º','å°ç¬¹','æ¡œå‚','èµ¤å‚é–€','å¤©ç¥','åšå¤šé§…å‰'],
  '58_up_åšå¤šé§…':    ['æ¡œç”º','å°ç¬¹','å‹•ç‰©åœ’','è–¬é™¢','åšå¤šé§…'],
  '59_up_å¤©ç¥':      ['æ¡œç”º','å°ç¬¹','è–¬é™¢','å¤©ç¥'],
  '59_up_å‰å¡š':      ['æ¡œç”º','å°ç¬¹','è–¬é™¢','å¤©ç¥','å‰å¡š'],
  '59_up_ç®±å´3ä¸ç›®': ['æ¡œç”º','å°ç¬¹','è–¬é™¢','å¤©ç¥','ç®±å´ä¸‰ä¸ç›®'],
  '69_up_åšå¤šé§…':    ['æ¡œç”º','å°ç¬¹','ç™¾å¹´æ©‹','åšå¤šé§…'],
  '56_down_æŸåŸå–¶æ¥­æ‰€':['æ¡œç”º','å—èŠ±ç•‘','èŠ±ç•‘','æŸåŸå–¶æ¥­æ‰€'],
  '56_down_æ¡§åŸå–¶æ¥­æ‰€':['æ¡œç”º','å—èŠ±ç•‘','èŠ±ç•‘','æ¡§åŸå–¶æ¥­æ‰€'],
};

function getVia(r, dir, d) {
  const key = `${r}_${dir}_${d}`;
  return VIA[key] || ['æ¡œç”º', d];
}

function pad(n) { return String(n).padStart(2,'0'); }
function toMin(h,m) { return h*60+m; }

function buildRouteMap() {
  const el = document.getElementById('routemap');
  ROUTE_STOPS.forEach((name, i) => {
    const wrap = document.createElement('div');
    wrap.className = 'stop-wrap';
    const isFocus = name === 'æ¡œç”º';
    wrap.innerHTML = `
      <div class="node-row">
        ${i > 0 ? '<div class="line-seg"></div>' : ''}
        <div class="stop-node ${isFocus?'focus':''}"></div>
        ${i < ROUTE_STOPS.length-1 ? '<div class="line-seg"></div>' : ''}
      </div>
      <div class="stop-label ${isFocus?'focus':''}">${name}</div>
    `;
    el.appendChild(wrap);
  });
}

function getFullSchedule() {
  const day = isWeekday ? 'weekday' : 'saturday';
  return DATA[currentDir][day].slice().sort((a,b) => toMin(a.h,a.m)-toMin(b.h,b.m));
}

function getFilteredSchedule() {
  return getFullSchedule().filter(b => {
    const rOk = filterRoutes.has('ALL') || filterRoutes.has(b.r);
    const dOk = filterDests.has('ALL') || filterDests.has(b.d);
    return rOk && dOk;
  });
}

function buildChips() {
  const full = getFullSchedule();
  const routes = ['ALL', ...new Set(full.map(b => b.r))];
  const dests  = ['ALL', ...new Set(full.map(b => b.d))];

  const rc = document.getElementById('route-chips');
  const dc = document.getElementById('dest-chips');
  rc.innerHTML = '';
  dc.innerHTML = '';

  routes.forEach(r => {
    const c = document.createElement('div');
    c.className = 'chip' + (r === 'ALL' ? ' all-chip' : '') + (filterRoutes.has(r) ? ' active' : '');
    c.textContent = r === 'ALL' ? 'å…¨ã¦' : r + 'ç•ª';
    c.onclick = () => toggleChip('route', r, c);
    rc.appendChild(c);
  });

  dests.forEach(d => {
    const c = document.createElement('div');
    c.className = 'chip' + (d === 'ALL' ? ' all-chip' : '') + (filterDests.has(d) ? ' active' : '');
    c.textContent = d === 'ALL' ? 'å…¨ã¦' : d;
    c.onclick = () => toggleChip('dest', d, c);
    dc.appendChild(c);
  });
}

function toggleChip(type, val, el) {
  const set = type === 'route' ? filterRoutes : filterDests;
  if (val === 'ALL') {
    set.clear(); set.add('ALL');
  } else {
    set.delete('ALL');
    if (set.has(val)) { set.delete(val); if (set.size === 0) set.add('ALL'); }
    else set.add(val);
  }
  // ãƒãƒƒãƒ—å†æç”»
  document.querySelectorAll(`#${type === 'route' ? 'route' : 'dest'}-chips .chip`).forEach(c => {
    const v = c.textContent === 'å…¨ã¦' ? 'ALL' : c.textContent.replace('ç•ª','');
    c.classList.toggle('active', set.has(v));
  });
  renderBoard();
}

function openModal(bus) {
  const via = getVia(bus.r, currentDir, bus.d);
  document.getElementById('m-badge').textContent = bus.r;
  document.getElementById('m-dest').textContent = 'â–¶ ' + bus.d;
  document.getElementById('m-time').textContent = pad(bus.h) + ':' + pad(bus.m) + ' ç™º';
  const viaEl = document.getElementById('m-via');
  viaEl.innerHTML = via.map((s, i) => {
    const isCurrent = s === 'æ¡œç”º';
    const isLast = i === via.length - 1;
    return `<div class="via-stop">
      <div class="via-dot ${isCurrent?'current':isLast?'terminus':''}"><span></span></div>
      <div class="via-name ${isCurrent?'current':isLast?'terminus':''}">${s}</div>
    </div>`;
  }).join('');
  document.getElementById('modal').classList.add('open');
}

function closeModal(e) {
  if (e.target.id === 'modal') document.getElementById('modal').classList.remove('open');
}

function renderBoard() {
  const now = getNow();
  const cur = toMin(now.getHours(), now.getMinutes());
  const schedule = getFilteredSchedule();
  const fullSchedule = getFullSchedule();
  const board = document.getElementById('board');

  // æœ¬æ—¥ã®é‹è¡Œçµ‚äº†
  if (!fullSchedule.find(b => toMin(b.h,b.m) > cur)) {
    board.innerHTML = `<div class="ended-hero"><p>ğŸŒ™ æœ¬æ—¥ã®é‹è¡Œã¯çµ‚äº†ã—ã¾ã—ãŸ</p></div>`;
    return;
  }

  const upcoming = schedule.filter(b => toMin(b.h,b.m) > cur);
  const nextBus = upcoming[0];

  let html = '';

  // â”€â”€ ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚«ãƒ¼ãƒ‰ï¼ˆæ¬¡ã®ãƒã‚¹ï¼‰
  if (nextBus) {
    const diff = toMin(nextBus.h, nextBus.m) - cur;
    html += `
    <div class="hero-card" onclick='openModal(${JSON.stringify(nextBus)})'>
      <div class="hero-label">â–¶ æ¬¡ã®ãƒã‚¹</div>
      <div class="hero-main">
        <div class="hero-left">
          <div class="hero-route">${nextBus.r}ç•ª</div>
          <div class="hero-dest">${nextBus.d}</div>
          <div class="hero-time">${pad(nextBus.h)}:${pad(nextBus.m)}</div>
        </div>
        <div class="hero-countdown">
          <div class="hero-cnum">${diff}</div>
          <div class="hero-clabel">åˆ†å¾Œ</div>
        </div>
      </div>
      <div class="hero-tap">ã‚¿ãƒƒãƒ—ã§çµŒç”±åœ°ã‚’ç¢ºèª â†’</div>
    </div>`;
  } else {
    html += `<div class="ended-hero"><p>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¡ä»¶ã«åˆã†ãƒã‚¹ãŒã‚ã‚Šã¾ã›ã‚“</p></div>`;
  }

  // â”€â”€ æ¬¡ã®2ã€œ4æœ¬
  const nextFew = upcoming.slice(1, 4);
  if (nextFew.length > 0) {
    html += `<div class="upcoming-list">
      <div class="upcoming-title">â–¸ ã“ã®å¾Œã®ãƒã‚¹</div>`;
    nextFew.forEach(b => {
      const d = toMin(b.h, b.m) - cur;
      html += `<div class="upcoming-item" onclick='openModal(${JSON.stringify(b)})'>
        <div class="upcoming-badge">${b.r}</div>
        <div class="upcoming-dest">${b.d}</div>
        <div class="upcoming-time">${pad(b.h)}:${pad(b.m)}</div>
        <div class="upcoming-min">${d}åˆ†å¾Œ</div>
      </div>`;
    });
    html += `</div>`;
  }

  // â”€â”€ æ™‚åˆ»è¡¨
  const isFiltered = schedule.length !== fullSchedule.length;
  html += `
  <div class="timetable-card">
    <div class="tt-header">â–¸ æ™‚åˆ»è¡¨ï¼ˆ${isWeekday?'å¹³æ—¥':'åœŸæ›œ'}ï¼‰${isFiltered ? ' â€” ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨ä¸­' : ''}</div>
    <div class="timetable">
      <div class="time-grid">
        ${schedule.map(b => {
          const bMin = toMin(b.h,b.m);
          const isPast = bMin <= cur;
          const isNext = nextBus && b===nextBus;
          return `<div class="time-item ${isPast?'past':''} ${isNext?'next-item':''}" onclick='openModal(${JSON.stringify(b)})'>
            <span class="rn">${b.r}</span>
            <span>${pad(b.h)}:${pad(b.m)}</span>
          </div>`;
        }).join('')}
      </div>
    </div>
  </div>`;

  board.innerHTML = html;
}

// ãƒãƒƒãƒˆæ™‚åˆ»ï¼ˆworldtimeapi.orgï¼‰
let serverTimeOffset = 0; // ã‚µãƒ¼ãƒãƒ¼æ™‚åˆ»ã¨ãƒ­ãƒ¼ã‚«ãƒ«æ™‚åˆ»ã®ã‚ºãƒ¬(ms)
let timesynced = false;

async function syncTime() {
  try {
    const res = await fetch('https://worldtimeapi.org/api/timezone/Asia/Tokyo');
    const data = await res.json();
    const serverMs = new Date(data.datetime).getTime();
    serverTimeOffset = serverMs - Date.now();
    timesynced = true;
    document.getElementById('sync-badge').style.display = 'flex';
  } catch(e) {
    // å–å¾—å¤±æ•—æ™‚ã¯ãƒ­ãƒ¼ã‚«ãƒ«æ™‚åˆ»ã‚’ä½¿ã†
    timesynced = false;
  }
}

function getNow() {
  return new Date(Date.now() + serverTimeOffset);
}

function tick() {
  const now = getNow();
  document.getElementById('clock').textContent = `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
  document.getElementById('dateStr').textContent = `${now.getFullYear()}å¹´${now.getMonth()+1}æœˆ${now.getDate()}æ—¥ï¼ˆ${DAYS[now.getDay()]}ï¼‰`;
  renderBoard();
}

function setDir(dir, el) {
  currentDir = dir;
  filterRoutes = new Set(['ALL']);
  filterDests = new Set(['ALL']);
  document.querySelectorAll('.ftab:not(.day-tab)').forEach(t => t.classList.remove('active'));
  el.classList.add('active');
  buildChips();
  renderBoard();
}

function toggleDay(el) {
  isWeekday = !isWeekday;
  el.textContent = isWeekday ? 'å¹³æ—¥' : 'åœŸæ›œ';
  document.getElementById('day-auto-label').textContent = 'âœï¸ æ‰‹å‹•ã§åˆ‡ã‚Šæ›¿ãˆä¸­';
  filterRoutes = new Set(['ALL']);
  filterDests = new Set(['ALL']);
  buildChips();
  renderBoard();
}

// èµ·å‹•æ™‚ã«æ›œæ—¥è‡ªå‹•åˆ¤å®š
function autoSetDay() {
  const dow = getNow().getDay(); // 0=æ—¥, 6=åœŸ
  isWeekday = (dow >= 1 && dow <= 5);
  const btn = document.getElementById('dayBtn');
  btn.textContent = isWeekday ? 'å¹³æ—¥' : 'åœŸæ›œ';
  document.getElementById('day-auto-label').textContent = 'ğŸ“… ä»Šæ—¥ã®æ›œæ—¥ã«è‡ªå‹•è¨­å®šä¸­ï¼ˆ' + (isWeekday ? 'å¹³æ—¥' : 'åœŸæ›œ') + 'ï¼‰';
}

buildRouteMap();
syncTime().then(() => {
  autoSetDay();
  buildChips();
  renderBoard();
}).catch(() => {
  autoSetDay();
  buildChips();
  renderBoard();
});
tick();
setInterval(tick, 1000);
// 5åˆ†ã”ã¨ã«å†åŒæœŸ
setInterval(syncTime, 5 * 60 * 1000);
</script>
</body>
</html>
